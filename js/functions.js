function submitForm(){$("#tripForm").submit()}function search(){$("#tripTable").html("<p class='text-center'><img src='./img/loader.gif' /><span class='label label-info'>Fetching stuff...</span></p>");$.post("search.php",{s:$("#searchBox").val()},function(e){$("#tripTable").html(e)})}function myTrips(){$("#home").removeClass("active");$("#myTrips").addClass("active");$("#tripTable").html("<p class='text-center'><img src='./img/loader.gif' /><span class='label label-info'>Fetching stuff...</span></p>");$.post("myTrips.php",function(e){$("#tripTable").html(e)})}function deleteTrip(e){temp="#trash"+e+"";$(temp).html('<img src="./img/loader2.gif"/>');$.post("deleteTrip.php",{id:e},function(e){if(e=="deleted"){$.post("myTrips.php",function(e){$("#tripTable").html(e)})}})}function showHome(){$("#myTrips").removeClass("active");$("#home").addClass("active");$("#tripTable").html("<p class='text-center'><img src='./img/loader.gif' /><span class='label label-info'>Fetching stuff...</span></p>");$.post("home.php",function(e){$("#tripTable").html(e)})}function isValidDate(e,t,n){var r=new Date(e,t-1,n);var i=r.getFullYear();var s=r.getMonth();var o=r.getDate();if(i==e&&s==t-1&&o==n)return true;else return false}function isChecked(e){var t=false;$("#"+e).find('input[type="radio"]').each(function(){if($(this).is(":checked"))t=true});$("#"+e).find('input[type="checkbox"]').each(function(){if($(this).is(":checked"))t=true});return t}jQuery(function(){jQuery("#contact").validate({expression:"if (VAL.match(/^[0-9]{10}$/)||(!VAL)) return true; else return false;",message:"Invalid contact MAX 10 digits."});jQuery("#date").validate({expression:"if (VAL.match(/^[0-9]{1,2}-[0-9]{1,2}-[0-9]{4}$/)) return true; else return false;",message:"Invalid date dd-mm-yyyy only"});jQuery("#from").validate({expression:"if (VAL.match(/^[a-zA-Z0-9 ,.-]{3,25}$/)) return true; else return false;",message:"Invalid place only <b>, . - </b>allowed"});jQuery("#to").validate({expression:"if (VAL.match(/^[a-zA-Z0-9 ,.-]{3,25}$/)) return true; else return false;",message:"Invalid place only <b>, . - </b>allowed or same as FROM"});jQuery("#seats").validate({expression:"if (VAL>=1&&VAL<=20) return true; else return false;",message:"Err! You sure about that value?"});jQuery("#note").validate({expression:"if (VAL.match(/^[a-zA-Z0-9 ,.-_@:!]{0,75}$/)||(!VAL)) return true; else return false;",message:"Only , .  - _ @ : allowed"});jQuery("#tripForm").validated(function(){$("#createBtnDiv").html('<img src="./img/loader2.gif" />');var e="contact="+$("#contact").val()+"&date="+$("#date").val()+"&from="+$("#from").val()+"&to="+$("#to").val()+"&seats="+$("#seats").val()+"&note="+$("#note").val();$.ajax({Type:"GET",url:"createTrip.php",data:e,success:function(e){$("#createBtnDiv").html('<button class="btn" onclick="submitForm();" id="createBtn">Save trip</button>');if(e=="success"){$("#createForm").modal("toggle");$("#formSuccess").show();$("#tripForm")[0].reset();showHome()}else if(e=="trips limit reached"){$("#createForm").modal("toggle");$("#limitReached").show()}else{jsData=$.parseJSON(e);for(i=0;i<jsData.length;i++){$("#"+jsData[i]+"").val("");$("#"+jsData[i]+"").focus();$("#"+jsData[i]+"").blur()}}}});return false})});$(document).ready(function(){$("#searchBtn").click(function(e){e.preventDefault();search()})});$(".tripDetails").popover();(function(jQuery){var ValidationErrors=new Array;jQuery.fn.validate=function(options){function validate_field(id){var self=jQuery(id).attr("id");var expression="function Validate(){"+options["expression"].replace(/VAL/g,"jQuery('#"+self+"').val()")+"} Validate()";var validation_state=eval(expression);if(!validation_state){if(jQuery(id).next("."+options["error_class"]).length==0){jQuery(id).after('<span class="'+options["error_class"]+'">'+options["message"]+"</span>");jQuery(id).addClass(options["error_field_class"])}if(ValidationErrors[FormID].join("|").search(id)==-1)ValidationErrors[FormID].push(id);return false}else{for(var i=0;i<ValidationErrors[FormID].length;i++){if(ValidationErrors[FormID][i]==id)ValidationErrors[FormID].splice(i,1)}return true}}options=jQuery.extend({expression:"return true;",message:"",error_class:"ValidationErrors",error_field_class:"ErrorField",live:true},options);var SelfID=jQuery(this).attr("id");var unix_time=new Date;unix_time=parseInt(unix_time.getTime()/1e3);if(!jQuery(this).parents("form:first").attr("id")){jQuery(this).parents("form:first").attr("id","Form_"+unix_time)}var FormID=jQuery(this).parents("form:first").attr("id");if(!(typeof ValidationErrors[FormID]=="object"&&ValidationErrors[FormID]instanceof Array)){ValidationErrors[FormID]=new Array}if(options["live"]){if(jQuery(this).find("input").length>0){jQuery(this).find("input").bind("blur",function(){if(validate_field("#"+SelfID,options)){if(options.callback_success)options.callback_success(this)}else{if(options.callback_failure)options.callback_failure(this)}});jQuery(this).find("input").bind("focus keypress click",function(){jQuery("#"+SelfID).next("."+options["error_class"]).remove();jQuery("#"+SelfID).removeClass(options["error_field_class"])})}else{jQuery(this).bind("blur",function(){validate_field(this)});jQuery(this).bind("focus keypress",function(){jQuery(this).next("."+options["error_class"]).fadeOut("fast",function(){jQuery(this).remove()});jQuery(this).removeClass(options["error_field_class"])})}}jQuery(this).parents("form").submit(function(){if(validate_field("#"+SelfID))return true;else return false})};jQuery.fn.validated=function(e){jQuery(this).each(function(){if(this.tagName=="FORM"){jQuery(this).submit(function(){if(ValidationErrors[jQuery(this).attr("id")].length==0)e();return false})}})}})(jQuery)